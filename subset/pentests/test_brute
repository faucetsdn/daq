#!/bin/bash -e

PORT=10000
REPORT=/tmp/report.txt

nc -vnz $TARGET_IP -w 2 $PORT || true
sleep 2
nc -vnz $TARGET_IP -w 2 $PORT || true
sleep 2

if nc -nz $TARGET_IP -w 2 $PORT; then
    sleep 3
    result=fail
    python -u brute_client.py $TARGET_IP $PORT $REPORT && result=pass
else
    echo Target port $PORT not open. > $REPORT
    result=skip
fi

echo RESULT $result network.brute >> $REPORT

[ "$result" != fail ]
